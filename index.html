<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SibDev Test - адаптивный дизайн</title>
    <link rel="stylesheet" href="styles/index.css">
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const button = document.querySelector("#button")
        const sidebar = document.querySelector("#sidebar")
        const sidebarFake = document.querySelector("#sidebar-fake")
        const layout = document.querySelector("#layout")
        const header = document.querySelector("#header")
        const navItems = document.querySelectorAll(".nav-item")
        const title = document.querySelector("#title")

        button.addEventListener("click", toggleOpenSidebar)
        layout.addEventListener("click", hideSidebar)
        layout.addEventListener("scroll", handleScroll)
        navItems.forEach(navItem => navItem.addEventListener("click", handleSelect))

        function toggleOpenSidebar() {
          sidebar.classList.toggle("closed")
          sidebarFake.classList.toggle("closed")
        }

        function hideSidebar() {
          sidebar.classList.add("closed")
          sidebarFake.classList.add("closed")
        }

        let shouldHide = layout.scrollTop > 200

        function handleScroll(e) {
          const scroll = e.target.scrollTop
          const shouldBeHidden = scroll > 200

          if (shouldBeHidden !== shouldHide) {
            // changed
            shouldHide = shouldBeHidden
            shouldHide
              ? header.classList.add("scroll")
              : header.classList.remove("scroll")
            console.log(shouldHide)
          }
        }

        function handleSelect(e) {
          navItems.forEach(navItem => navItem.classList.remove("active"))
          e.currentTarget.classList.add("active")

          const span = e.currentTarget.children[1]
          const text = span.innerText
          title.innerText = text
        }
      })
    </script>
</head>
<body>
    <div id="root">

        <div class="layout" id="layout">
            <aside class="sidebar closed fake" id="sidebar-fake"></aside>
            <main>
                <!-- i dont know how to repeat html =) -->
                <div class="coupon">
                    <div class="coupon__image coupon-image-1"></div>

                    <div class="coupon__name">Пробка на Мира</div>
                    <div class="coupon__description">Вечер для двоих</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-2"></div>

                    <div class="coupon__name">кИНО И НЕМЦЫ</div>
                    <div class="coupon__description">Бесплатный бокал пива</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-3"></div>

                    <div class="coupon__name">valery cakes</div>
                    <div class="coupon__description">Торт</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-4"></div>

                    <div class="coupon__name">sushi sell</div>
                    <div class="coupon__description">Набор “Праздник”</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-5"></div>

                    <div class="coupon__name">mangosteen</div>
                    <div class="coupon__description">Фрукт в подарок</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-6"></div>

                    <div class="coupon__name">теленок табака</div>
                    <div class="coupon__description">Стейк “Мачете”</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-7"></div>

                    <div class="coupon__name">fire food</div>
                    <div class="coupon__description">Вторая шаурма в подарок</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

                <div class="coupon">
                    <div class="coupon__image coupon-image-8"></div>

                    <div class="coupon__name">aroma cremeria</div>
                    <div class="coupon__description">Джелато “Пармезан”</div>
                    <div class="coupon__code">J123</div>
                    <div class="coupon__label">Купон</div>
                    <div class="coupon__box"></div>
                </div>

            </main>
            <header class="--scroll" id="header">
                <div class="header">
                    <h1 id="title">Развлечения</h1>
                </div>
                <div class="search">
                    <input type="text" placeholder="Какой магазин вам нужен?">
                </div>
            </header>
        </div>

        <div class="layout abs">
            <aside class="sidebar closed" id="sidebar">
                <div class="sidebar__head">
                    <div class="sidebar__head__logo"></div>
                    <div class="sidebar__head__company">BECO</div>
                    <div class="sidebar__head__button" id="button">
                        <i class="button-menu"></i>
                    </div>
                </div>
                <div class="sidebar__nav">
                    <div class="nav-item">
                        <i class="icon-catalog"></i>
                        <span>Каталог</span>
                    </div>
                    <div class="nav-item">
                        <i class="icon-health"></i>
                        <span>Здоровье</span>
                    </div>
                    <div class="nav-item">
                        <i class="icon-beauty"></i>
                        <span>Красота</span>
                    </div>
                    <div class="nav-item active">
                        <i class="icon-enjoy"></i>
                        <span>Развлечения</span>
                    </div>
                    <div class="nav-item">
                        <i class="icon-car"></i>
                        <span>Авто</span>
                    </div>
                </div>
            </aside>
        </div>


    </div>
</body>
</html>
